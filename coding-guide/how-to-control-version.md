# 版本号规约

版本号指的是项目的版本号，每次发布上线，版本号会同步有更新。版本号有很多种规范，技术部所有项目的版本号，按照一下规范制定：

- 发布的版本，只能递增，不能回退，除非出现上线失败，回滚的场景
- 版本号编制：x.y.z
  - x 是大功能版本迭代，例如业务流程大规模变更，或者界面大规模更新
  - y 是小的特性功能分支，例如上线了一个火车票功能
  - z 是小版本功能, 例如修复了一个 bug，完成了一个小的功能
  - x, y 由产品经理决定来制定，z 由开发人员制定
  - 每次增加 x 或者 y 的时候，项目需要卡 release 分支，z 版本迭代只需要合并到其所在的 y 分支以及 master
  - 不同项目的版本号不必同步

## 示例

例如 TMC，当前版本为 2.0.0，产品经理约定，优化（网金社、邮件等）预定为 2.1，火车票模块的功能可以预定为 2.2，优化发布上线后，将版本号从 2.0.0 升级为 2.1.0，并建立 2.1 的版本分支，此后如果有此版本的 bug fix，那么从 2.1 分支拉取分支，并提交到 2.1 和 master 分支，此时的版本号为 2.1.1

## 异常情况处理

- 回滚：版本号不变更，直接会滚到上一个 release
- 版本开发延迟或提前：如火车票先于优化模块完成，那么火车票就占用 2.2，并将优化的预定分支更新为 2.3

## 可能遇到的问题

- 多版本并行开发的情况
  - 解决方式：谁先发布（merge 到 master），谁就占用版本号， 不提前规划版本号，开发分之以功能替换
- 功能大小的界定，可能火车票作为一个大版本（X）发布，这个由根据开发小团队而定
